
export TERM=xterm-256color

red=$(tput setaf 1)
green=$(tput setaf 2)
yellow=$(tput setaf 3)
reset=$(tput sgr0)

cat << EOF
  ${yellow}UzPharm uses pre-commit hooks to run our linting and style checks
  We do this to avoid additional hassle during pull request reviews 
  because all PRs must pass these checks. If you're doing something
  temporary and want to skip these checks, you can disable this hook
  with: git commit --no-verify ${reset}
EOF

npx lint-staged

echo "${yellow} Running Type Check ${reset}"
if npm run type-check; then
  echo "${green}✔ Type Check passed.${reset}"
else
  echo "${red}✘ Type Check failed. Please fix the type errors before committing.${reset}"
  exit 1
fi

# echo "${yellow} Running Knip ${reset}"
# if npm run knip; then
#   echo "${green}✔ Knip passed.${reset}"
# else
#   echo "${red}✘ Knip failed. Please fix the knip errors before committing.${reset}"
#   exit 1
# fi

# checking if gitleaks is installed
# if ! command -v gitleaks > /dev/null 2>&1
# then
#     echo ""
#     echo "[!] A pre-commit script tried to run gitleaks but you don't have it installed ¯\_(ツ)_/¯"
#     echo "    You can brew install it, or use the other methods described here: https://github.com/gitleaks/gitleaks#installing"
#     echo ""
# fi

# gitleaks protect -v --staged

